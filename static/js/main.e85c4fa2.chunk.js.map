{"version":3,"sources":["components/UI/Avatar/index.ts","components/UI/Avatar/Avatar.tsx","components/Channel/index.ts","components/Channel/Channel.tsx","utils/format.ts","components/ChannelList/index.ts","components/ChannelList/ChannelList.tsx","utils/generation.ts","constants/index.ts","components/Message/Message/index.ts","components/Message/Message/Message.tsx","components/Message/DateSeparator/index.ts","components/Message/DateSeparator/DateSeparator.tsx","components/MessageList/MessageList.tsx","containers/logger.tsx","components/MessageList/index.ts","assets/icons/send.svg","components/ChatInput/ChatInput.tsx","containers/localization.tsx","components/ChatInput/index.ts","assets/icons/exit.svg","components/UserProfile/index.ts","components/UserProfile/UserProfile.tsx","components/UI/TextField/index.ts","components/UI/TextField/TextField.tsx","api/channels.ts","api/messages.ts","assets/icons/search.svg","views/Chat/Chat.tsx","views/Chat/index.ts","assets/icons/error.svg","views/ErrorPage/index.ts","views/ErrorPage/ErrorPage.tsx","components/UI/Button/index.ts","components/UI/Button/Button.tsx","assets/icons/account.svg","api/users.ts","views/Login/Login.tsx","views/Login/index.ts","assets/icons/add.svg","views/Registration/Registration.tsx","views/Registration/index.ts","App.tsx","serviceWorker.ts","index.tsx"],"names":["Avatar","memo","className","avatar","title","src","alt","Channel","date","id","lastMessage","isSelected","onChannelChange","formattedDate","Date","toLocaleDateString","replace","classes","onClick","userName","text","ChannelList","activeChannelId","channelsList","sortedChannelsList","sort","a","b","map","channel","to","key","genKey","process","API_ENV","getTime","toString","Math","random","toLowerCase","Message","message","user","short","time","toLocaleTimeString","name","dangerouslySetInnerHTML","__html","content","DateSeparator","weekday","month","year","day","formatDateTextRU","MessageList","refMessagesList","React","createRef","renderDate","currentMsg","lastMsg","abs","renderMessage","isSameUser","undefined","scrollContainer","this","current","scrollTo","left","top","scrollHeight","scrollBottom","props","messagesList","ref","msg","i","Component","withLogger","WrappedComponent","prevProps","MessageListComponent","_extends","Object","assign","target","arguments","length","source","prototype","hasOwnProperty","call","apply","_objectWithoutProperties","excluded","sourceKeys","keys","indexOf","_objectWithoutPropertiesLoose","getOwnPropertySymbols","sourceSymbolKeys","propertyIsEnumerable","createElement","d","fill","_ref","svgRef","height","viewBox","width","ForwardRef","forwardRef","ChatInput","state","draftMessage","textareaRowsCount","writeDraftMessage","e","preventDefault","setState","value","clearInput","stopDefaultEnter","addNewLineMessage","handleKeyPress","shiftKey","send","onClickSend","sendMessage","localization","rows","onChange","onKeyUp","onKeyDown","currentLocalization","en","withLocalization","ChatInputComponent","UserProfile","logoutUser","logout","TextField","getChannels","userId","testChannels","console","error","testMessages","getMessages","channelId","Number","Chat","channels","messages","searchQuery","loadChannels","channelsAPI","onSearch","currentTarget","resetSearch","filterMessage","screeningValue","regex","RegExp","filter","test","loadMessages","history","messagesAPI","updateLastMessage","addMessage","newMessage","now","match","params","oldChannelId","newChannelId","path","placeholder","search","selectChannel","withRouter","ChatComponent","ErrorPage","page404","goHome","Button","login","loginedUser","users","JSON","parse","localStorage","getItem","find","username","password","registration","newUser","saveUser","push","setItem","stringify","checkUser","findIndex","Login","errors","handlerOnChangeUsername","handlerOnChangePassword","resetErrors","addError","loginUser","UsersAPI","submit","onSubmit","type","LoginComponent","Registration","approvedUser","rulesUsername","rulesPassword","onBlur","RegistrationComponent","App","exact","from","component","Boolean","window","location","hostname","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","unregister","catch"],"mappings":"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","file":"static/js/main.e85c4fa2.chunk.js","sourcesContent":["import { memo } from 'react';\r\nimport { Avatar as AvatarComponent } from './Avatar';\r\n\r\nexport const Avatar = memo(AvatarComponent);\r\n","import React from 'react';\r\nimport './Avatar.scss';\r\n\r\nimport { Props } from './types';\r\n\r\nexport const Avatar = ({ className = '', avatar, title }: Props) => {\r\n  return <img className={`${className} avatar`} src={avatar} alt={title} />;\r\n};\r\n","import { memo } from 'react';\r\nimport { Channel as ChannelComponent } from './Channel';\r\n\r\nexport const Channel = memo(ChannelComponent);\r\n","import React from 'react';\r\nimport './Channel.scss';\r\n\r\nimport { formatDateRU } from '../../utils/format';\r\nimport { Avatar } from '../UI/Avatar';\r\n\r\nimport { Props } from './types';\r\n\r\nexport const Channel = ({\r\n  id,\r\n  title,\r\n  avatar,\r\n  lastMessage,\r\n  isSelected,\r\n  onChannelChange,\r\n  className = '',\r\n}: Props) => {\r\n  const formattedDate: string = lastMessage\r\n    ? formatDateRU(lastMessage.date)\r\n    : '';\r\n  const classes: string = isSelected ? 'channel--active' : '';\r\n\r\n  return (\r\n    <div\r\n      className={`channel ${className} ${classes}`}\r\n      onClick={() => onChannelChange(id)}\r\n    >\r\n      <Avatar className=\"channel__avatar\" avatar={avatar} title={title} />\r\n      <div className=\"channel__body\">\r\n        <div className=\"channel__header\">\r\n          <span className=\"channel__title\">{title}</span>\r\n          <span className=\"channel__date\">{formattedDate}</span>\r\n        </div>\r\n        {lastMessage ? (\r\n          <div className=\"channel__footer\">\r\n            <span className=\"channel__user-name\">{lastMessage.userName}</span>\r\n            {` : `}\r\n            <span className=\"channel__message\">{lastMessage.text}</span>\r\n          </div>\r\n        ) : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","export function formatTime(date: number): string {\r\n  return new Date(date).toLocaleTimeString('ru');\r\n}\r\n\r\nexport function formatDateRU(date: number): string {\r\n  return new Date(date).toLocaleDateString('ru').replace(/\\./g, '/');\r\n}\r\n\r\nexport function formatDateTextRU(date: number): string {\r\n  const options = { weekday: 'short', month: 'short', year: 'numeric', day: 'numeric' };\r\n  return new Date(date).toLocaleDateString('ru', options).replace(/ г./g, '');\r\n}\r\n","import { memo } from 'react';\r\nimport { ChannelList as ChannelListComponent } from './ChannelList';\r\n\r\nexport const ChannelList = memo(ChannelListComponent);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './ChannelList.scss';\r\n\r\nimport { Channel } from '../Channel';\r\n\r\nimport { Props } from './types';\r\nimport { IChannel, TChannelsList } from '../../types';\r\n\r\nexport const ChannelList = ({\r\n  activeChannelId,\r\n  channelsList,\r\n  onChannelChange,\r\n  className = '',\r\n}: Props) => {\r\n  const sortedChannelsList: TChannelsList = channelsList.sort(\r\n    (a: IChannel, b: IChannel) =>\r\n      a.lastMessage && b.lastMessage\r\n        ? b.lastMessage.date - a.lastMessage.date\r\n        : 1\r\n  );\r\n\r\n  return (\r\n    <div className={`${className} channel-list`}>\r\n      {sortedChannelsList.map((channel: IChannel) => (\r\n        <Link to={`/chat/${channel.id}`} key={channel.id}>\r\n          <Channel\r\n            {...channel}\r\n            key={channel.id}\r\n            isSelected={activeChannelId === channel.id}\r\n            onChannelChange={onChannelChange}\r\n            className=\"channel-list__channel\"\r\n          />\r\n        </Link>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","export const genKey = (): string => {\r\n  const timestamp = ((new Date().getTime() / 1000) | 0).toString(16);\r\n  let id: string = timestamp + 'xxxxxxxxxxxxxxxx';\r\n  id = id.replace(/[x]/g, () => ((Math.random() * 16) | 0).toString(16)).toLowerCase();\r\n  return id;\r\n};\r\n","export const API_ENV: string | undefined = process.env.API_ENV;\r\nexport const API_URL: string = 'https://localhost:3000/api';\r\n\r\nexport const ONE_DAY: number = 24 * 60 * 60 * 1000;\r\n","import { memo } from 'react';\r\nimport { Message as MessageComponent } from './Message';\r\n\r\nexport const Message = memo(MessageComponent);\r\n","import React from 'react';\r\nimport './Message.scss';\r\n\r\nimport { formatTime } from '../../../utils/format';\r\nimport { Avatar } from '../../UI/Avatar';\r\n\r\nimport { Props } from './types';\r\n\r\nexport const Message = ({ message, user, short = false }: Props) => {\r\n  const time: string = formatTime(message.date);\r\n\r\n  return (\r\n    <div className={`message ${short ? 'message--short' : ''}`}>\r\n      {!short ? (\r\n        <Avatar\r\n          className=\"message__avatar\"\r\n          avatar={user.avatar}\r\n          title={user.name}\r\n        />\r\n      ) : (\r\n        <div className=\"message__avatar--hide\"></div>\r\n      )}\r\n      <div className=\"message__body\">\r\n        {!short ? (\r\n          <span className=\"message__user-name\">{user.name}</span>\r\n        ) : null}\r\n\r\n        <span dangerouslySetInnerHTML={{__html:message.content.replace(/\\n/g, '<br/>')}} />\r\n      </div>\r\n      <span className=\"message__time\">{time}</span>\r\n    </div>\r\n  );\r\n};\r\n","import { memo } from 'react';\r\nimport { DateSeparator as DateSeparatorComponent } from './DateSeparator';\r\n\r\nexport const DateSeparator = memo(DateSeparatorComponent);\r\n","import React from 'react';\r\nimport './DateSeparator.scss';\r\n\r\nimport { formatDateTextRU } from '../../../utils/format';\r\n\r\nimport { Props } from './types';\r\n\r\nexport const DateSeparator = ({ date }: Props) => {\r\n  const formattedDate: string = formatDateTextRU(date);\r\n\r\n  return (\r\n    <div className=\"date\">\r\n      <span className=\"date__text\">{formattedDate}</span>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Component, Fragment } from 'react';\r\nimport './MessageList.scss';\r\n\r\nimport { ONE_DAY } from '../../constants';\r\n\r\nimport { genKey } from '../../utils/generation';\r\nimport { Message } from '../Message/Message';\r\nimport { DateSeparator } from '../Message/DateSeparator';\r\n\r\nimport { IMessage } from '../../types';\r\nimport { Props, State } from './types';\r\n\r\nexport class MessageList extends Component<Props, State> {\r\n  private refMessagesList: React.RefObject<HTMLDivElement> = React.createRef();\r\n\r\n  private renderDate = (currentMsg: IMessage, lastMsg: IMessage | undefined) => {\r\n    if (lastMsg) {\r\n      const delta: Number = Math.abs(currentMsg.message.date - lastMsg.message.date);\r\n      if (delta < ONE_DAY) return null;\r\n    }\r\n    return <DateSeparator date={currentMsg.message.date} />;\r\n  };\r\n\r\n  private renderMessage = (currentMsg: IMessage, lastMsg: IMessage | undefined) => {\r\n    const isSameUser: boolean = lastMsg !== undefined && currentMsg.user.id === lastMsg.user.id;\r\n    return <Message {...currentMsg} short={isSameUser} />;\r\n  };\r\n\r\n  private scrollBottom(): void {\r\n    const scrollContainer = this.refMessagesList.current;\r\n    scrollContainer &&\r\n      scrollContainer.scrollTo({\r\n        left: 0,\r\n        top: scrollContainer.scrollHeight,\r\n      });\r\n  }\r\n\r\n  public componentDidUpdate() {\r\n    this.scrollBottom();\r\n  }\r\n\r\n  public render() {\r\n    const { messagesList, className } = this.props;\r\n\r\n    return (\r\n      <div className={`${className} message-list`} ref={this.refMessagesList}>\r\n        {messagesList.map((msg: IMessage, i: number) => (\r\n          <Fragment key={genKey()}>\r\n            {this.renderDate(msg, messagesList[i - 1])}\r\n            {this.renderMessage(msg, messagesList[i - 1])}\r\n          </Fragment>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from 'react';\r\n\r\ninterface ILoggerProp {}\r\n\r\nexport function withLogger<P>(WrappedComponent: React.ComponentType<P>) {\r\n  return class extends Component<P & ILoggerProp> {\r\n    componentDidUpdate(prevProps: any) {\r\n      // ! отключено что бы не создавать шум в консоли\r\n      // console.log('old props: ', prevProps);\r\n      // console.log('new props: ', this.props);\r\n    }\r\n    render() {\r\n      return <WrappedComponent {...this.props} />;\r\n    }\r\n  };\r\n}\r\n","import { MessageList as MessageListComponent } from './MessageList';\r\n\r\nimport { memo } from 'react';\r\nimport { withLogger } from '../../containers/logger';\r\n\r\nexport const MessageList = withLogger(memo(MessageListComponent));\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgSend = function SvgSend(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSend, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/send.352beb52.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react';\r\nimport './ChatInput.scss';\r\nimport { ReactComponent as IconSend } from '../../assets/icons/send.svg';\r\n\r\nimport { Props, State } from './types';\r\n\r\nexport class ChatInput extends Component<Props, State> {\r\n  public state: Readonly<State> = {\r\n    draftMessage: '',\r\n    textareaRowsCount: 1,\r\n  };\r\n\r\n  private writeDraftMessage = (e: React.ChangeEvent<HTMLTextAreaElement>): void => {\r\n    e.preventDefault();\r\n    this.setState({\r\n      draftMessage: e.target.value,\r\n    });\r\n  };\r\n\r\n  private clearInput = (): void => {\r\n    this.setState({\r\n      draftMessage: '',\r\n      textareaRowsCount: 1,\r\n    });\r\n  };\r\n\r\n  private stopDefaultEnter = (e: React.KeyboardEvent<HTMLTextAreaElement>): void => {\r\n    if (e.key === 'Enter') e.preventDefault();\r\n  };\r\n\r\n  private addNewLineMessage = (): void => {\r\n    this.setState((state) => {\r\n      return {\r\n        draftMessage: state.draftMessage + '\\n',\r\n        textareaRowsCount:\r\n          state.textareaRowsCount < 3 ? state.textareaRowsCount + 1 : state.textareaRowsCount,\r\n      };\r\n    });\r\n  };\r\n\r\n  private handleKeyPress = (e: React.KeyboardEvent<HTMLTextAreaElement>): void => {\r\n    e.preventDefault();\r\n    if (e.key === 'Enter' && e.shiftKey) {\r\n      this.addNewLineMessage();\r\n    } else if (e.key === 'Enter') {\r\n      this.send();\r\n    }\r\n  };\r\n\r\n  private onClickSend = (e: React.MouseEvent<HTMLButtonElement>): void => {\r\n    e.preventDefault();\r\n    this.send();\r\n  };\r\n\r\n  private send = (): void => {\r\n    const { sendMessage } = this.props;\r\n    const { draftMessage } = this.state;\r\n    if (draftMessage !== '') {\r\n      sendMessage(draftMessage);\r\n      this.clearInput();\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    const { className, localization } = this.props;\r\n    const { textareaRowsCount, draftMessage } = this.state;\r\n\r\n    return (\r\n      <form className={`${className} chat-input`}>\r\n        <textarea\r\n          className=\"chat-input__textarea\"\r\n          name=\"textarea\"\r\n          value={draftMessage}\r\n          rows={textareaRowsCount}\r\n          onChange={this.writeDraftMessage}\r\n          onKeyUp={this.handleKeyPress}\r\n          onKeyDown={this.stopDefaultEnter}\r\n        ></textarea>\r\n        <button className=\"chat-input__button-send\" onClick={this.onClickSend}>\r\n          <IconSend className=\"button-send__icon-send\" title={localization.send} />\r\n        </button>\r\n      </form>\r\n    );\r\n  }\r\n}\r\n","import React from 'react';\r\nimport EN from '../locales/en.json';\r\n\r\ntype ILocalization = {\r\n  [key: string]: string;\r\n};\r\n\r\ntype TLocalizations = {\r\n  [key: string]: ILocalization;\r\n};\r\n\r\nexport interface LocalizationProp {\r\n  localization: ILocalization;\r\n}\r\n\r\nconst localizations: TLocalizations = {\r\n  en: EN,\r\n};\r\n\r\nconst currentLocalization: ILocalization = localizations['en'];\r\n\r\nexport function withLocalization<P>(\r\n  WrappedComponent: React.ComponentType<P & LocalizationProp>\r\n) {\r\n  return (props: P) => (\r\n    <WrappedComponent {...props} localization={currentLocalization} />\r\n  );\r\n}\r\n","import { ChatInput as ChatInputComponent } from './ChatInput';\r\nimport { withLocalization } from '../../containers/localization';\r\n\r\nexport const ChatInput = withLocalization(ChatInputComponent);\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3H5c-1.11 0-2 .9-2 2v4h2V5h14v14H5v-4H3v4c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z\"\n});\n\nvar SvgExit = function SvgExit(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgExit, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/exit.4ba2843a.svg\";\nexport { ForwardRef as ReactComponent };","import { UserProfile as UserProfileComponent } from './UserProfile';\r\nimport { withLocalization } from '../../containers/localization';\r\n\r\nexport const UserProfile = withLocalization(UserProfileComponent);\r\n","import React from 'react';\r\nimport { Avatar } from '../../components/UI/Avatar';\r\nimport './UserProfile.scss';\r\n\r\nimport { Props } from './types';\r\n\r\nimport { ReactComponent as IconLogout } from '../../assets/icons/exit.svg';\r\n\r\nexport const UserProfile = ({\r\n  className,\r\n  localization,\r\n  user,\r\n  logoutUser,\r\n}: Props) => {\r\n  return (\r\n    <div className={`${className} user-profile`}>\r\n      <Avatar\r\n        className=\"user-profile__avatar\"\r\n        avatar={user.avatar}\r\n        title={user.name}\r\n      />\r\n      <span className=\"user-profile__name\">{user.name}</span>\r\n      <IconLogout\r\n        className=\"user-profile__logout-icon\"\r\n        title={localization.logout}\r\n        onClick={() => logoutUser()}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n","import { TextField as TextFieldComponent } from './TextField';\r\n\r\nexport const TextField = TextFieldComponent;\r\n","import React from 'react';\r\n\r\nimport './TextField.scss';\r\n\r\nimport { Props } from './types';\r\n\r\nexport const TextField = ({ className, ...props }: Props) => {\r\n  return <input className={`${className} text-field`} {...props} />;\r\n};\r\n","/**\r\n * Весь закомментированный код оставлен на будущую реализацию обращения к API сервиса\r\n */\r\n\r\n// import { API_URL } from '../constants';\r\n// import { http, IHttpResponse } from '../utils/http';\r\n\r\nimport { TChannelsList, TUserId } from '../types';\r\n\r\nimport testChannels from './static/channels.json';\r\n\r\nexport const getChannels = async (userId: TUserId): Promise<TChannelsList> => {\r\n  // let data: IHttpResponse<any>;\r\n  try {\r\n    // data = await http<any>(\r\n    //   `${API_URL}/chennals`\r\n    // );\r\n    // return data;\r\n    return testChannels;\r\n  } catch (error) {\r\n    console.error(error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default {\r\n  getChannels,\r\n};\r\n","/**\r\n * Весь закомментированный код оставлен на будущую реализацию обращения к API сервиса\r\n */\r\n\r\n// import { API_URL } from '../constants';\r\n// import { http, IHttpResponse } from '../utils/http';\r\nimport { TChannelId, TMessagesList } from '../types';\r\n\r\nimport testMessages1 from './static/messages-Chicago.json';\r\nimport testMessages2 from './static/messages-Los-Angeles.json';\r\nimport testMessages3 from './static/messages-New-York.json';\r\nimport testMessages4 from './static/messages-San-Francisco.json';\r\nimport testMessages5 from './static/messages-Washington.json';\r\n\r\nconst testMessages = [testMessages1, testMessages2, testMessages3, testMessages4, testMessages5, []];\r\n\r\nexport const getMessages = async (channelId: TChannelId): Promise<TMessagesList> => {\r\n  // let data: IHttpResponse<any>;\r\n  try {\r\n    // data = await http<any>(\r\n    //   `${API_URL}/chennals`s\r\n    // );\r\n    // return data;\r\n    return testMessages[Number(channelId)];\r\n  } catch (error) {\r\n    console.error(error);\r\n    return [];\r\n  }\r\n};\r\n\r\nexport default {\r\n  getMessages\r\n};\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgSearch = function SvgSearch(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgSearch, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/search.a88f7755.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport { ChannelList } from '../../components/ChannelList';\r\nimport { MessageList } from '../../components/MessageList';\r\nimport { ChatInput } from '../../components/ChatInput';\r\nimport { UserProfile } from '../../components/UserProfile';\r\nimport { TextField } from '../../components/UI/TextField';\r\nimport './Chat.scss';\r\n\r\nimport { genKey } from '../../utils/generation';\r\n\r\nimport channelsAPI from '../../api/channels';\r\nimport messagesAPI from '../../api/messages';\r\n\r\nimport { ReactComponent as IconSearch } from '../../assets/icons/search.svg';\r\n\r\nimport { Props, State } from './types';\r\nimport { TChannelId, IMessage, ILastMessage, TMessagesList } from '../../types';\r\n\r\nexport class Chat extends Component<Props, State> {\r\n  public state: Readonly<State> = {\r\n    activeChannelId: '',\r\n    channels: [],\r\n    messages: [],\r\n    searchQuery: '',\r\n  };\r\n\r\n  public async componentDidMount() {\r\n    const { channelId } = this.props.match.params;\r\n    this.loadChannels();\r\n\r\n    if (channelId) {\r\n      this.loadMessages(channelId);\r\n    }\r\n  }\r\n\r\n  public componentDidUpdate(prevProps: Props): void {\r\n    const oldChannelId = prevProps.match.params.channelId;\r\n    const newChannelId = this.props.match.params.channelId;\r\n\r\n    if (oldChannelId !== newChannelId) {\r\n      this.setState({\r\n        activeChannelId: newChannelId,\r\n      });\r\n      this.loadMessages(newChannelId);\r\n    }\r\n  }\r\n\r\n  private loadChannels = async (): Promise<void> => {\r\n    const { user } = this.props;\r\n\r\n    const channels = await channelsAPI.getChannels(user.id);\r\n    this.setState({\r\n      channels: channels,\r\n    });\r\n  };\r\n\r\n  private onSearch = (e: React.FormEvent<HTMLInputElement>): void => {\r\n    let { value } = e.currentTarget;\r\n    this.setState({\r\n      searchQuery: value,\r\n    });\r\n  };\r\n\r\n  private resetSearch = (): void => {\r\n    this.setState({\r\n      searchQuery: '',\r\n    });\r\n  };\r\n\r\n  // геттер для сообщений\r\n  private filterMessage = (value: string): TMessagesList => {\r\n    const { messages } = this.state;\r\n    const screeningValue: string = value.replace(\r\n      /[-/\\\\^$*+?.()|[\\]{}]/g,\r\n      '\\\\$&'\r\n    );\r\n    const regex: RegExp = new RegExp(screeningValue, 'gi');\r\n    const filterMessages: TMessagesList = messages.filter((msg: IMessage) =>\r\n      regex.test(msg.message.content)\r\n    );\r\n    return filterMessages;\r\n  };\r\n\r\n  private loadMessages = async (channelId: TChannelId): Promise<void> => {\r\n    const { history } = this.props;\r\n\r\n    const messages = await messagesAPI.getMessages(channelId);\r\n    if (messages !== undefined) {\r\n      this.resetSearch();\r\n\r\n      this.setState({\r\n        activeChannelId: channelId,\r\n        messages: messages,\r\n      });\r\n\r\n      if (messages.length) {\r\n        const lastMessage = messages[messages.length - 1];\r\n        this.updateLastMessage(channelId, lastMessage);\r\n      }\r\n    } else {\r\n      history.replace('/');\r\n    }\r\n  };\r\n\r\n  private updateLastMessage = (\r\n    channelId: TChannelId,\r\n    message: IMessage\r\n  ): void => {\r\n    const lastMessage: ILastMessage = {\r\n      userName: message.user.name,\r\n      date: message.message.date,\r\n      text: message.message.content,\r\n    };\r\n\r\n    this.setState((state) => {\r\n      return {\r\n        channels: state.channels.map((channel) => {\r\n          if (channel.id === channelId) channel.lastMessage = lastMessage;\r\n          return channel;\r\n        }),\r\n      };\r\n    });\r\n  };\r\n\r\n  private addMessage = (text: string): void => {\r\n    // при отправке на сервер мы должны указать activeChannelId\r\n    const { activeChannelId } = this.state;\r\n    const { user } = this.props;\r\n\r\n    const newMessage: IMessage = {\r\n      user,\r\n      message: {\r\n        id: genKey(),\r\n        date: Date.now(),\r\n        content: text,\r\n      },\r\n    };\r\n\r\n    this.setState((state) => {\r\n      return {\r\n        messages: [...state.messages, newMessage],\r\n      };\r\n    });\r\n\r\n    this.updateLastMessage(activeChannelId, newMessage);\r\n  };\r\n\r\n  public render() {\r\n    const { searchQuery, channels, activeChannelId } = this.state;\r\n    const { user, logoutUser, localization } = this.props;\r\n\r\n    return (\r\n      <div className=\"chat\">\r\n        <div className=\"chat__sidebar\">\r\n          <Route path=\"/chat/:channelId?\">\r\n            <ChannelList\r\n              className=\"chat__channel-list\"\r\n              channelsList={channels}\r\n              activeChannelId={activeChannelId}\r\n              onChannelChange={this.loadMessages}\r\n            />\r\n            <UserProfile\r\n              className=\"chat__user-profile\"\r\n              logoutUser={logoutUser}\r\n              user={user}\r\n            />\r\n          </Route>\r\n        </div>\r\n        <Switch>\r\n          <Route path=\"/chat/:channelId\">\r\n            <div className=\"chat__main\">\r\n              <div className=\"chat__message-search\">\r\n                <IconSearch className=\"search__icon\" />\r\n                <TextField\r\n                  value={searchQuery}\r\n                  className=\"search__input\"\r\n                  placeholder={localization.search}\r\n                  onChange={this.onSearch}\r\n                />\r\n              </div>\r\n              <MessageList\r\n                className=\"chat__message-list\"\r\n                messagesList={this.filterMessage(searchQuery)}\r\n              />\r\n              <ChatInput\r\n                className=\"chat__text-field\"\r\n                sendMessage={this.addMessage}\r\n              />\r\n            </div>\r\n          </Route>\r\n          <Route path=\"/chat\">\r\n            <div className=\"chat__main--empty\">\r\n              {localization.selectChannel}\r\n            </div>\r\n          </Route>\r\n        </Switch>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { Chat as ChatComponent } from './Chat';\r\n\r\nimport { withRouter } from 'react-router';\r\nimport { withLogger } from '../../containers/logger';\r\nimport { withLocalization } from '../../containers/localization'\r\n\r\nexport const Chat = withRouter(withLogger(withLocalization(ChatComponent)));\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-2h2v2zm0-4h-2V7h2v6z\"\n});\n\nvar SvgError = function SvgError(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgError, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/error.62d23dd4.svg\";\nexport { ForwardRef as ReactComponent };","import { ErrorPage as ErrorPageComponent } from './ErrorPage';\r\nimport { withLocalization } from '../../containers/localization';\r\n\r\nexport const ErrorPage = withLocalization(ErrorPageComponent);\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './ErrorPage.scss';\r\n\r\nimport { Props } from './types';\r\n\r\nimport { ReactComponent as IconError } from '../../assets/icons/error.svg';\r\n\r\nexport const ErrorPage = ({ localization }: Props) => {\r\n  return (\r\n    <div className=\"error-page\">\r\n      <IconError className=\"error-page__icon\" title={localization.page404} />\r\n      <span className=\"error-page__text\">{localization.page404}</span>\r\n      <Link to=\"/\" className=\"error-page__link\">\r\n        {localization.goHome}\r\n      </Link>\r\n    </div>\r\n  );\r\n};\r\n","import { Button as ButtonComponent } from './Button';\r\n\r\nexport const Button = ButtonComponent;\r\n","import React from 'react';\r\n\r\nimport './Button.scss';\r\n\r\nimport { Props } from './types';\r\n\r\nexport const Button = ({ className, ...props }: Props) => {\r\n  return <button className={`${className} button`} {...props}></button>;\r\n};\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M3 5v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.11 0-2 .9-2 2zm12 4c0 1.66-1.34 3-3 3s-3-1.34-3-3 1.34-3 3-3 3 1.34 3 3zm-9 8c0-2 4-3.1 6-3.1s6 1.1 6 3.1v1H6v-1z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgAccount = function SvgAccount(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAccount, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/account.30845892.svg\";\nexport { ForwardRef as ReactComponent };","import { TUsersSave, IUserSave, ILoginUser, IUser } from '../types';\r\nimport { genKey } from '../utils/generation';\r\n\r\nexport const login = async (\r\n  loginedUser: ILoginUser\r\n): Promise<IUser | undefined> => {\r\n  try {\r\n    const users: TUsersSave = JSON.parse(localStorage.getItem('users') || '[]');\r\n    const user: IUserSave | undefined = users.find(\r\n      (user: IUserSave) =>\r\n        user.name === loginedUser.username &&\r\n        user.password === loginedUser.password\r\n    );\r\n\r\n    if (user) {\r\n      delete user.password;\r\n      const loginedUser: IUser = user;\r\n      return loginedUser;\r\n    }\r\n    return undefined;\r\n  } catch (error) {\r\n    console.error(error);\r\n    return undefined;\r\n  }\r\n};\r\n\r\nexport const registration = async (\r\n  user: ILoginUser\r\n): Promise<IUser | undefined> => {\r\n  const key: string = genKey();\r\n\r\n  const newUser: IUser = {\r\n    id: key,\r\n    name: user.username,\r\n    avatar: 'https://i.pravatar.cc/70?img=55',\r\n  };\r\n\r\n  const saveUser: IUserSave = {\r\n    ...newUser,\r\n    password: user.password,\r\n  };\r\n\r\n  try {\r\n    const users: TUsersSave = JSON.parse(localStorage.getItem('users') || '[]');\r\n    users.push(saveUser);\r\n    localStorage.setItem('users', JSON.stringify(users));\r\n    return newUser;\r\n  } catch (error) {\r\n    console.error(error);\r\n    return undefined;\r\n  }\r\n};\r\n\r\nexport const checkUser = async (username: string): Promise<boolean> => {\r\n  const users: TUsersSave = JSON.parse(localStorage.getItem('users') || '[]');\r\n  const index: number = users.findIndex((user) => user.name === username);\r\n  if (index > -1) return true;\r\n  return false;\r\n};\r\n\r\nexport default {\r\n  login,\r\n  registration,\r\n};\r\n","import React, { Component } from 'react';\r\nimport { TextField } from '../../components/UI/TextField';\r\nimport { Button } from '../../components/UI/Button';\r\nimport { Link } from 'react-router-dom';\r\nimport { ReactComponent as AccountIcon } from '../../assets/icons/account.svg';\r\nimport './Login.scss';\r\n\r\nimport * as UsersAPI from '../../api/users';\r\n\r\nimport { Props, State } from './types';\r\nimport { ILoginUser } from '../../types';\r\n\r\nexport class Login extends Component<Props, State> {\r\n  public state: State = {\r\n    errors: [],\r\n    username: '',\r\n    password: '',\r\n  };\r\n\r\n  private handlerOnChangeUsername = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ): void => {\r\n    e.preventDefault();\r\n    const { value } = e.target;\r\n    this.setState({ username: value });\r\n  };\r\n\r\n  private handlerOnChangePassword = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ): void => {\r\n    e.preventDefault();\r\n    const { value } = e.target;\r\n    this.setState({ password: value });\r\n  };\r\n\r\n  private resetErrors = (): void => {\r\n    this.setState({ errors: [] });\r\n  };\r\n\r\n  private addError = (error: string): void => {\r\n    this.setState((state) => {\r\n      return { errors: [...state.errors, error] };\r\n    });\r\n  };\r\n\r\n  private send = async (\r\n    e: React.MouseEvent<HTMLButtonElement>\r\n  ): Promise<void> => {\r\n    e.preventDefault();\r\n\r\n    const { localization, history, loginUser } = this.props;\r\n\r\n    this.resetErrors();\r\n\r\n    const user: ILoginUser = {\r\n      username: this.state.username,\r\n      password: this.state.password,\r\n    };\r\n\r\n    const loginedUser = await UsersAPI.login(user);\r\n    if (loginedUser) {\r\n      loginUser(loginedUser);\r\n\r\n      history.replace('/chat');\r\n    } else {\r\n      this.addError(localization['errors.login']);\r\n    }\r\n  };\r\n\r\n  private submit = (e: React.FormEvent<HTMLFormElement>): void => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  public render() {\r\n    const { localization } = this.props;\r\n    const { errors, username, password } = this.state;\r\n\r\n    return (\r\n      <div className=\"login\">\r\n        <form className=\"form\" onSubmit={this.submit}>\r\n          <AccountIcon className=\"form__icon\" />\r\n          {errors.length ? (\r\n            <ul className=\"form__errors animation-shake\">\r\n              {errors.map((error: string, i: number) => (\r\n                <li key={i.toString()}>{error}</li>\r\n              ))}\r\n            </ul>\r\n          ) : null}\r\n          <label className=\"form__label\">{localization.login}</label>\r\n          <TextField\r\n            className=\"form__name\"\r\n            type=\"text\"\r\n            name=\"username\"\r\n            placeholder={localization.username}\r\n            value={username}\r\n            onChange={this.handlerOnChangeUsername}\r\n          />\r\n          <label className=\"form__label\">{localization.password}</label>\r\n          <TextField\r\n            className=\"form__pass\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder={localization.password}\r\n            value={password}\r\n            onChange={this.handlerOnChangePassword}\r\n          />\r\n          <Button className=\"form__button--login\" onClick={this.send}>\r\n            {localization.login}\r\n          </Button>\r\n          <Button className=\"form__button--registration\">\r\n            <Link to=\"/registration\">{localization.registration}</Link>\r\n          </Button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { Login as LoginComponent } from './Login';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLocalization } from '../../containers/localization';\r\n\r\nexport const Login = withRouter(withLocalization(LoginComponent));\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React from \"react\";\n\nvar _ref2 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10h-4v4h-2v-4H7v-2h4V7h2v4h4v2z\"\n});\n\nvar _ref3 = /*#__PURE__*/React.createElement(\"path\", {\n  d: \"M0 0h24v24H0z\",\n  fill: \"none\"\n});\n\nvar SvgAdd = function SvgAdd(_ref) {\n  var svgRef = _ref.svgRef,\n      title = _ref.title,\n      props = _objectWithoutProperties(_ref, [\"svgRef\", \"title\"]);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    height: 24,\n    viewBox: \"0 0 24 24\",\n    width: 24,\n    ref: svgRef\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", null, title) : null, _ref2, _ref3);\n};\n\nvar ForwardRef = React.forwardRef(function (props, ref) {\n  return /*#__PURE__*/React.createElement(SvgAdd, _extends({\n    svgRef: ref\n  }, props));\n});\nexport default __webpack_public_path__ + \"static/media/add.cd89643f.svg\";\nexport { ForwardRef as ReactComponent };","import React, { Component } from 'react';\r\nimport { TextField } from '../../components/UI/TextField';\r\nimport { Button } from '../../components/UI/Button';\r\nimport { Link } from 'react-router-dom';\r\nimport { ReactComponent as AddIcon } from '../../assets/icons/add.svg';\r\nimport './Registration.scss';\r\n\r\nimport * as UsersAPI from '../../api/users';\r\n\r\nimport { Props, State } from './types';\r\nimport { ILoginUser } from '../../types';\r\n\r\nexport class Registration extends Component<Props, State> {\r\n  public state: State = {\r\n    errors: [],\r\n    username: '',\r\n    password: '',\r\n  };\r\n\r\n  private handlerOnChangeUsername = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ): void => {\r\n    e.preventDefault();\r\n    const { value } = e.target;\r\n    this.resetErrors();\r\n    this.setState({ username: value });\r\n  };\r\n\r\n  private handlerOnChangePassword = (\r\n    e: React.ChangeEvent<HTMLInputElement>\r\n  ): void => {\r\n    e.preventDefault();\r\n    const { value } = e.target;\r\n    this.setState({ password: value });\r\n  };\r\n\r\n  private resetErrors = (): void => {\r\n    this.setState({ errors: [] });\r\n  };\r\n\r\n  private addError = (error: string): void => {\r\n    this.setState((state) => {\r\n      return { errors: [...state.errors, error] };\r\n    });\r\n  };\r\n\r\n  private send = async (\r\n    e: React.MouseEvent<HTMLButtonElement>\r\n  ): Promise<void> => {\r\n    e.preventDefault();\r\n\r\n    const { localization, history, loginUser } = this.props;\r\n\r\n    this.resetErrors();\r\n\r\n    const user: ILoginUser = {\r\n      username: this.state.username,\r\n      password: this.state.password,\r\n    };\r\n\r\n    const approvedUser = await UsersAPI.registration(user);\r\n    if (approvedUser) {\r\n      loginUser(approvedUser);\r\n      history.replace('/chat');\r\n    } else {\r\n      this.addError(localization['errors.omg500']);\r\n    }\r\n  };\r\n\r\n  private submit = (e: React.FormEvent<HTMLFormElement>): void => {\r\n    e.preventDefault();\r\n  };\r\n\r\n  private rulesUsername = async (\r\n    e: React.FocusEvent<HTMLInputElement>\r\n  ): Promise<void> => {\r\n    e.preventDefault();\r\n    const { username } = this.state;\r\n    const { localization } = this.props;\r\n\r\n    if (username) {\r\n      const isUserDuplication = await UsersAPI.checkUser(username);\r\n      if (isUserDuplication)\r\n        this.addError(localization['rules.userDuplication']);\r\n    } else {\r\n      this.addError(localization['rules.requiredUser']);\r\n    }\r\n  };\r\n\r\n  private rulesPassword = async (\r\n    e: React.FocusEvent<HTMLInputElement>\r\n  ): Promise<void> => {\r\n    e.preventDefault();\r\n    const { password } = this.state;\r\n    const { localization } = this.props;\r\n\r\n    if (!password) {\r\n      this.addError(localization['rules.requiredPassword']);\r\n    }\r\n  };\r\n\r\n  public render() {\r\n    const { localization } = this.props;\r\n    const { errors, username, password } = this.state;\r\n\r\n    return (\r\n      <div className=\"registration\">\r\n        <form className=\"form\" onSubmit={this.submit}>\r\n          <AddIcon className=\"form__icon\" />\r\n          {errors.length ? (\r\n            <ul className=\"form__errors animation-shake\">\r\n              {errors.map((error: string, i: number) => (\r\n                <li key={i.toString()}>{error}</li>\r\n              ))}\r\n            </ul>\r\n          ) : null}\r\n          <label className=\"form__label\">{localization.login}</label>\r\n          <TextField\r\n            className=\"form__name\"\r\n            type=\"text\"\r\n            name=\"username\"\r\n            placeholder={localization.username}\r\n            value={username}\r\n            onBlur={this.rulesUsername}\r\n            onChange={this.handlerOnChangeUsername}\r\n          />\r\n          <label className=\"form__label\">{localization.password}</label>\r\n          <TextField\r\n            className=\"form__pass\"\r\n            type=\"password\"\r\n            name=\"password\"\r\n            placeholder={localization.password}\r\n            value={password}\r\n            onBlur={this.rulesPassword}\r\n            onChange={this.handlerOnChangePassword}\r\n          />\r\n          <Button className=\"form__button--login\" onClick={this.send}>\r\n            {localization.registration}\r\n          </Button>\r\n          <Button className=\"form__button--registration\">\r\n            <Link to=\"/login\">{localization.login}</Link>\r\n          </Button>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { Registration as RegistrationComponent } from './Registration';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { withLocalization } from '../../containers/localization';\r\n\r\nexport const Registration = withRouter(withLocalization(RegistrationComponent));\r\n","import React, { Component } from 'react';\r\nimport { BrowserRouter as Router } from 'react-router-dom';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\n\r\nimport { Chat } from './views/Chat';\r\nimport { ErrorPage } from './views/ErrorPage';\r\nimport { Login } from './views/Login';\r\nimport { Registration } from './views/Registration';\r\n\r\nimport { IUser } from './types';\r\n\r\ninterface State {\r\n  user: IUser;\r\n}\r\n\r\nexport class App extends Component<{}, State> {\r\n  public state: Readonly<State> = {\r\n    user: {\r\n      id: '',\r\n      name: '',\r\n      avatar: '',\r\n    },\r\n  };\r\n\r\n  private loginUser = (user: IUser): void => {\r\n    this.setState({\r\n      user: user,\r\n    });\r\n  };\r\n\r\n  private logoutUser = (): void => {\r\n    this.setState({\r\n      user: {\r\n        id: '',\r\n        name: '',\r\n        avatar: '',\r\n      },\r\n    });\r\n  };\r\n\r\n  render() {\r\n    const { user } = this.state;\r\n    return (\r\n      <Router>\r\n        <Redirect exact from=\"/\" to=\"/login\" />\r\n        <Switch>\r\n          <Route path=\"/chat/:channelId?\">\r\n            {user.id ? (\r\n              <Chat logoutUser={this.logoutUser} user={user} />\r\n            ) : (\r\n              <Redirect to=\"/login\" />\r\n            )}\r\n          </Route>\r\n          <Route path=\"/registration\">\r\n            <Registration loginUser={this.loginUser} />\r\n          </Route>\r\n          <Route path=\"/login\">\r\n            <Login loginUser={this.loginUser} />\r\n          </Route>\r\n          <Route component={ErrorPage} />\r\n        </Switch>\r\n      </Router>\r\n    );\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/)\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.');\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React, { StrictMode } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './styles/index.css';\r\n\r\nimport { App } from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <StrictMode>\r\n    <App />\r\n  </StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}